<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8" />
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
      
<link type="image/png" sizes="120x120" rel="icon" href="https://cdn.discordapp.com/attachments/941035975277174785/944252749988659260/doomer_120.png">
      <span id="stl">
        <link rel="stylesheet" href="../style.css"/>
        </span>
        <title>Поиск</title>
    </head>
    <body>
        <header></header>
        <a href="../mn.html" class="nav" style="height:3vh;width: 100%;display:block;margin-top: 0;max-width: 100%;border-radius: 0px;text-align: center;border: 0;padding: 1.5vw 0 1.5vw 0;margin: 0;">На главную</a>  
<div id="res">
    <ul id="res_ul">
    </ul>
</div>
<div id="all_art_div">
    <img src="https://cdn.discordapp.com/attachments/941035975277174785/962808875730485378/error.jpg" >
    <h1>ПО ДАННОМУ ЗАПРОСУ НИЧЕГО НЕ НАЙДЕНО</h1>
    <h2>вот список статей, которые есть на сайте</h2>    
    <ul id="all_art">
        </ul>
</div>
        <footer></footer>
        <script src="../sifer.js"></script>
        <script>
            let arr;
    let array = fetch('../data.json').then((resp) => {return resp.json();}).then((data) => {
        data = JSON.parse(desif(JSON.stringify(data)));

        let results = location.search.substring(3).split("-");
        let links = [];
        console.log(results)
            let res_ul = document.getElementById("res_ul");
            if(results[0] !== '' && results[0] !== 'x'){
        for(i = 0;i < results.length;i++){
            
            let w_url = new URL(`${location.origin}/wik_site/sub_pages/wiki.html`);
            w_url.searchParams.set("s",results[i]);

            let title_tag = "";
            let tit = data[results[i]].title;
            let x = tit.split('');
            for(let i = 0;i < x.length;i++){
                if(x[i] === "&"){
                    title_tag = `title="${x.slice(i+1).join("")}"`;
                    console.log(title_tag)
                    tit = x.slice(0,i).join("");
                }
            }

            let desc = data[results[i]].description;
            links[i] = `<li><h2 ${title_tag}><a href="${w_url}">${tit}</a></h2><p>${desc}</p></li>`;
            res_ul.innerHTML = links.join("");
        }}else{

            let aad = document.getElementById("all_art_div");
            let aau = document.getElementById("all_art");
            aad.style.display = "flex";
            let arts = [];
            for(let i  =0; i < data.length;i++){
                
            let w_url = new URL(`${location.origin}/wik_site/sub_pages/wiki.html`);
            w_url.searchParams.set("s",results[i]);

            let title_tag = "";
            let contin = false;
            let tit = data[i].title;
            let x = tit.split('');
            for(let i = 0;i < x.length;i++){
                if(x[i] === "&"){
                    if(x.slice(i+1).join("") === "/hide"){contin = true}
                    title_tag = `title="${x.slice(i+1).join("")}"`;
                    console.log(title_tag)
                    tit = x.slice(0,i).join("");
                }
            }
                if(contin){continue}
                arts[i] = `<li><h2 ${title_tag}><a href="${w_url}">${tit}</a></h2></li>`;
                aau.innerHTML = arts.join("");
            }
        res_ul.innerHTML = links.join("");
        let rs = document.getElementById("res");
        rs.style.display = "none";
        if(results[0] === "x"){
        document.getElementsByTagName("img")[1].style.display = "none";
        document.getElementsByTagName("h1")[0].style.display = "none";
        document.getElementsByTagName("h2")[0].innerTEXT = "none";
        }}
        });
        </script>
        <script>
            let wid = document.documentElement.clientWidth;
            let hei = document.documentElement.clientHeight;

            if(hei > wid){
                let stl = document.getElementById("stl");
                stl.innerHTML = '<link rel="stylesheet" href="../mob_style.css"/>';
            }
            
            let head = document.getElementsByTagName("header")[0];
            let adr = desif("xkknю://эct.crюэeщcыnn.эeт/ыkkыэxтjtkю/941035975277174785/941036394686591056/ieяe.ntя");
            if(adr){
            head.innerHTML = `<img src="${adr}" alt="logo image" class="logo">`;
        }else{
            console.log("%cошибка подключения лого","color:red;");
        }
        </script>
    </body>
</html>
